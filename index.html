<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anesthesia Drug Calculator</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;900&family=Roboto+Mono:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #2b5876, #4e4376);
        --primary-dark: #2b5876;
        --primary-light: #4e4376;
        --primary-alpha: rgba(43, 88, 118, 0.1);
        --glass-bg: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
        --glass-blur: blur(20px);
        --text-light: #ffffff;
        --text-dark: #2c3e50;
        --text-muted: #666;
        --text-primary: #2b5876;
        --bg-light: #f8f9fa;
        --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        --white: #ffffff;
        --shadow-light: rgba(0, 0, 0, 0.1);
        --shadow-medium: rgba(0, 0, 0, 0.15);
        --shadow-heavy: rgba(0, 0, 0, 0.25);
        --shadow-primary: 0 4px 15px rgba(43, 88, 118, 0.2);
        --border-radius: 12px;
        --border-radius-lg: 16px;
        --transition: all 0.3s ease;
        --transition-fast: all 0.2s ease;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
        background: var(--bg-gradient);
        line-height: 1.4;
        font-weight: 400;
        color: var(--text-dark);
        font-size: 13px;
      }

      /* Dashboard Layout */
      .dashboard-container {
        display: grid;
        grid-template-columns: 220px 1fr;
        min-height: 100vh;
        gap: 0;
      }

      /* Left Sidebar - Patient Info Panel */
      .patient-panel {
        background: var(--primary-gradient);
        padding: 1rem;
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
        color: var(--text-light);
      }

      .patient-panel-header {
        text-align: center;
        margin-bottom: 1rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }

      .patient-panel-header h1 {
        font-size: 1rem;
        font-weight: 700;
        margin-bottom: 0.25rem;
      }

      .patient-panel-header p {
        font-size: 0.7rem;
        opacity: 0.8;
      }

      .patient-form {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .patient-input-group {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .patient-input-group label {
        font-size: 0.7rem;
        font-weight: 600;
        opacity: 0.9;
      }

      .patient-input-group input {
        padding: 0.5rem 0.6rem;
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.15);
        color: var(--text-light);
        font-size: 0.85rem;
        font-weight: 600;
        transition: var(--transition-fast);
      }

      .patient-input-group input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }

      .patient-input-group input:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .btn-calculate-sidebar {
        margin-top: 0.5rem;
        padding: 0.6rem 1rem;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        color: var(--text-light);
        font-weight: 600;
        font-size: 0.8rem;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .btn-calculate-sidebar:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }

      /* Main Content Area */
      .main-content {
        padding: 0.75rem;
        overflow-y: auto;
      }

      /* Calculator Grid */
      .calculator-grid {
        display: grid;
        gap: 0.6rem;
        grid-template-columns: repeat(2, 1fr);
      }

      @media (min-width: 900px) {
        .calculator-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      @media (min-width: 1200px) {
        .calculator-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      @media (min-width: 1500px) {
        .calculator-grid {
          grid-template-columns: repeat(5, 1fr);
        }
      }

      @media (min-width: 1800px) {
        .calculator-grid {
          grid-template-columns: repeat(6, 1fr);
        }
      }

      /* Compact Calculator Card */
      .calculator-card {
        background: hsla(0, 0%, 100%, 0.95);
        backdrop-filter: blur(10px);
        border-radius: var(--border-radius);
        padding: 0.6rem;
        transition: var(--transition-fast);
        border: 1px solid rgba(0, 0, 0, 0.06);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
      }

      .calculator-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--primary-gradient);
        transform: scaleX(0);
        transition: transform 0.2s ease;
        transform-origin: left;
      }

      .calculator-card:hover::before {
        transform: scaleX(1);
      }

      .calculator-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        background: #fff;
      }

      /* Card Header */
      .calculator-card-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
        padding-bottom: 0.4rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .card-icon {
        width: 28px;
        height: 28px;
        background: var(--primary-gradient);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .card-icon i {
        font-size: 0.75rem;
        color: #fff;
      }

      .calculator-card h3 {
        font-size: 0.72rem;
        font-weight: 700;
        color: var(--primary-dark);
        margin: 0;
        line-height: 1.2;
      }

      /* Card Body - Inputs */
      .calculator-card-body {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        margin-bottom: 0.4rem;
      }

      .compact-input {
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }

      .compact-input label {
        font-size: 0.65rem;
        color: var(--text-muted);
        min-width: 65px;
        flex-shrink: 0;
      }

      .compact-input input {
        flex: 1;
        padding: 0.3rem 0.4rem;
        font-size: 0.75rem;
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 5px;
        background: var(--bg-light);
        min-width: 0;
        transition: var(--transition-fast);
      }

      .compact-input input:focus {
        outline: none;
        border-color: var(--primary-dark);
        background: var(--white);
      }

      /* Info Text */
      .info-text {
        font-size: 0.6rem;
        color: var(--text-muted);
        background: var(--primary-alpha);
        padding: 0.3rem 0.5rem;
        border-radius: 4px;
        border-left: 2px solid var(--primary-dark);
        margin-bottom: 0.4rem;
        line-height: 1.3;
      }

      /* Result Box */
      .result-box {
        background: hsla(0, 0%, 98%, 1);
        border-radius: 8px;
        padding: 0.35rem;
        margin-top: auto;
        border: 1px solid rgba(43, 88, 118, 0.08);
      }

      .result-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.25rem 0.35rem;
        border-radius: 6px;
        transition: var(--transition-fast);
      }

      .result-item + .result-item {
        margin-top: 0.2rem;
      }

      .result-label {
        display: flex;
        align-items: center;
        color: var(--text-dark);
        font-size: 0.65rem;
        font-weight: 600;
      }

      .result-label i {
        margin-right: 0.4rem;
        color: var(--primary-dark);
        font-size: 0.7rem;
        width: 14px;
        text-align: center;
      }

      .result-value {
        padding: 0.25rem 0.5rem;
        border-radius: 5px;
        min-width: 55px;
        text-align: center;
        transition: var(--transition-fast);
        font-weight: 600;
        background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        border: 1px dashed #cbd5e0;
        color: #64748b;
        font-size: 0.7rem;
      }

      .result-item.has-result .result-value {
        background: var(--primary-gradient);
        color: var(--text-light);
        border: none;
        font-weight: 700;
        box-shadow: 0 3px 10px rgba(43, 88, 118, 0.25);
        font-family: "Roboto Mono", monospace;
        font-size: 0.75rem;
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .dashboard-container {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr;
        }

        .patient-panel {
          position: relative;
          height: auto;
          padding: 0.75rem;
        }

        .patient-form {
          flex-direction: row;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .patient-input-group {
          flex: 1;
          min-width: 80px;
        }

        .btn-calculate-sidebar {
          flex: 1;
          min-width: 100px;
        }

        .main-content {
          padding: 0.5rem;
        }

        .calculator-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.5rem;
        }
      }

      @media (max-width: 480px) {
        .calculator-grid {
          grid-template-columns: 1fr;
        }

        .patient-form {
          flex-direction: column;
        }

        .patient-input-group {
          min-width: 100%;
        }
      }

      /* Scrollbar styling */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
      }

      ::-webkit-scrollbar-thumb {
        background: rgba(43, 88, 118, 0.3);
        border-radius: 3px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgba(43, 88, 118, 0.5);
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Left Sidebar - Patient Info -->
      <aside class="patient-panel">
        <div class="patient-panel-header">
          <h1><i class="fas fa-stethoscope"></i> Drug Calculator</h1>
          <p>Anesthesia Dosage</p>
        </div>
        <form class="patient-form" onsubmit="event.preventDefault(); calculateAll();">
          <div class="patient-input-group">
            <label for="age">Age (years)</label>
            <input type="number" id="age" placeholder="Age" />
          </div>
          <div class="patient-input-group">
            <label for="height">Height (cm)</label>
            <input type="number" id="height" placeholder="Height" />
          </div>
          <div class="patient-input-group">
            <label for="weight">Weight (kg) *</label>
            <input type="number" id="weight" placeholder="Weight" step="0.1" required />
          </div>
          <button type="submit" class="btn-calculate-sidebar">
            <i class="fas fa-calculator"></i> Calculate
          </button>
        </form>
      </aside>

      <!-- Main Content - Drug Cards -->
      <main class="main-content">
        <div class="calculator-grid">
          <!-- NEP Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-syringe"></i></div>
              <h3>Norepinephrine (NEP)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mcg/ml)</label>
                <input type="number" id="nep_conc" value="20" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="nep_dr" value="0.01" step="0.001" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="nep_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="nep_result">-</div>
              </div>
            </div>
          </div>

          <!-- EPI Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-heartbeat"></i></div>
              <h3>Epinephrine (EPI)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mcg/ml)</label>
                <input type="number" id="epi_conc" value="20" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="epi_dr" value="0.01" step="0.001" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="epi_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="epi_result">-</div>
              </div>
            </div>
          </div>

          <!-- DOPA Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-pills"></i></div>
              <h3>Dopamine (DOPA)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="dopa_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="dopa_dr" value="5" step="0.1" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="dopa_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="dopa_result">-</div>
              </div>
            </div>
          </div>

          <!-- DOBU Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-pump-medical"></i></div>
              <h3>Dobutamine (DOBU)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="dobu_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="dobu_dr" value="5" step="0.1" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="dobu_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="dobu_result">-</div>
              </div>
            </div>
          </div>

          <!-- NTG Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-prescription-bottle"></i></div>
              <h3>Nitroglycerin (NTG)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="ntg_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="ntg_dr" value="0.5" step="0.01" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="ntg_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="ntg_result">-</div>
              </div>
            </div>
          </div>

          <!-- SNP Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-flask"></i></div>
              <h3>Nitroprusside (SNP)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="snp_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="snp_dr" value="0.5" step="0.01" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="snp_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="snp_result">-</div>
              </div>
            </div>
          </div>

          <!-- VASO Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Vasopressin (VASO)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (unit/ml)</label>
                <input type="number" id="vaso_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Rate (unit/min)</label>
                <input type="number" id="vaso_dr1" value="0.04" step="0.001" />
              </div>
              <div class="compact-input">
                <label>Rate (unit/kg/hr)</label>
                <input type="number" id="vaso_dr2" value="0.04" step="0.001" />
              </div>
            </div>
            <div class="result-box">
              <div class="result-item" id="vaso1_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> unit/min</div>
                <div class="result-value" id="vaso1_result">-</div>
              </div>
              <div class="result-item" id="vaso2_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> unit/kg/hr</div>
                <div class="result-value" id="vaso2_result">-</div>
              </div>
            </div>
          </div>

          <!-- PPF Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-capsules"></i></div>
              <h3>Propofol (PPF)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="ppf_conc" value="20" step="0.01" />
              </div>
            </div>
            <p class="info-text">Range: 6-12 mg/kg/hr</p>
            <div class="result-box">
              <div class="result-item" id="ppf1_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MIN (ml/hr)</div>
                <div class="result-value" id="ppf1_result">-</div>
              </div>
              <div class="result-item" id="ppf2_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MAX (ml/hr)</div>
                <div class="result-value" id="ppf2_result">-</div>
              </div>
            </div>
          </div>

          <!-- RFTN Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-prescription"></i></div>
              <h3>Remifentanil (RFTN)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mcg/ml)</label>
                <input type="number" id="rftn_conc" value="20" step="0.01" />
              </div>
            </div>
            <p class="info-text">Range: 0.1-1 mcg/kg/min</p>
            <div class="result-box">
              <div class="result-item" id="rftn1_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MIN (ml/hr)</div>
                <div class="result-value" id="rftn1_result">-</div>
              </div>
              <div class="result-item" id="rftn2_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MAX (ml/hr)</div>
                <div class="result-value" id="rftn2_result">-</div>
              </div>
            </div>
          </div>

          <!-- SuFTN Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-tablets"></i></div>
              <h3>Sufentanil (SuFTN)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mcg/ml)</label>
                <input type="number" id="suftn_conc" value="5" step="0.01" />
              </div>
            </div>
            <p class="info-text">Range: 0.5-1.5 mcg/kg/hr</p>
            <div class="result-box">
              <div class="result-item" id="suftn1_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MIN (ml/hr)</div>
                <div class="result-value" id="suftn1_result">-</div>
              </div>
              <div class="result-item" id="suftn2_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> MAX (ml/hr)</div>
                <div class="result-value" id="suftn2_result">-</div>
              </div>
            </div>
          </div>

          <!-- TXA Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-filter"></i></div>
              <h3>Tranexamic Acid (TXA)</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="txa_conc" value="100" step="0.01" />
              </div>
            </div>
            <p class="info-text">Load: 10mg/kg/20min | Maint: 1mg/kg/hr</p>
            <div class="result-box">
              <div class="result-item" id="txa1_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Load (ml/hr)</div>
                <div class="result-value" id="txa1_result">-</div>
              </div>
              <div class="result-item" id="txa2_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Maint (ml/hr)</div>
                <div class="result-value" id="txa2_result">-</div>
              </div>
            </div>
          </div>

          <!-- Calcium Gluconate Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Calcium Gluconate</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="ca_conc" value="100" />
              </div>
              <div class="compact-input">
                <label>Bolus (g)</label>
                <input type="number" id="ca_bolus" value="1.0" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Rate (mg/kg/hr)</label>
                <input type="number" id="ca_dr" value="5" />
              </div>
            </div>
            <p class="info-text">Bolus: 1-2g | C.I.: 5-10 mg/kg/hr</p>
            <div class="result-box">
              <div class="result-item" id="ca_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="ca_bolus_result">-</div>
              </div>
              <div class="result-item" id="ca_cont_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="ca_cont_result">-</div>
              </div>
            </div>
          </div>

          <!-- Magnesium Sulfate Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Magnesium Sulfate</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="mg_conc" value="200" />
              </div>
              <div class="compact-input">
                <label>Bolus (g)</label>
                <input type="number" id="mg_bolus" value="1.0" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Infusion (g/hr)</label>
                <input type="number" id="mg_infusion" value="1.0" step="0.1" />
              </div>
            </div>
            <p class="info-text">Bolus: 1-2g slow | Inf: 1-2 g/hr</p>
            <div class="result-box">
              <div class="result-item" id="mg_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="mg_bolus_result">-</div>
              </div>
              <div class="result-item" id="mg_infusion_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="mg_infusion_result">-</div>
              </div>
            </div>
          </div>

          <!-- Sodium Bicarbonate Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Sodium Bicarbonate</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mEq/ml)</label>
                <input type="number" id="sbic_conc" value="1" step="0.01" />
              </div>
              <div class="compact-input">
                <label>Bolus (mEq/kg)</label>
                <input type="number" id="sbic_dr" value="1" step="0.1" />
              </div>
            </div>
            <p class="info-text">Typical bolus: 1 mEq/kg</p>
            <div class="result-box">
              <div class="result-item" id="sbic_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="sbic_result">-</div>
              </div>
            </div>
          </div>

          <!-- Phenylephrine Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Phenylephrine</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mcg/ml)</label>
                <input type="number" id="phen_conc" value="100" />
              </div>
              <div class="compact-input">
                <label>Bolus (mcg)</label>
                <input type="number" id="phen_bolus" value="50" />
              </div>
              <div class="compact-input">
                <label>Rate (mcg/kg/min)</label>
                <input type="number" id="phen_dr" value="0.1" step="0.01" />
              </div>
            </div>
            <p class="info-text">Bolus: 50-100mcg | C.I.: 0.1-0.5</p>
            <div class="result-box">
              <div class="result-item" id="phen_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="phen_bolus_result">-</div>
              </div>
              <div class="result-item" id="phen_cont_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> C.I. (ml/hr)</div>
                <div class="result-value" id="phen_cont_result">-</div>
              </div>
            </div>
          </div>

          <!-- Dantrolene Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Dantrolene</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="dant_conc" value="20" />
              </div>
              <div class="compact-input">
                <label>Infusion (mg/kg/hr)</label>
                <input type="number" id="dant_infusion" value="0.25" step="0.01" />
              </div>
            </div>
            <p class="info-text">Bolus: 2.5mg/kg (max 10) | C.I.: 0.25-0.5</p>
            <div class="result-box">
              <div class="result-item" id="dant_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="dant_bolus_result">-</div>
              </div>
              <div class="result-item" id="dant_max_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Max (ml)</div>
                <div class="result-value" id="dant_max_result">-</div>
              </div>
              <div class="result-item" id="dant_infusion_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Inf (ml/hr)</div>
                <div class="result-value" id="dant_infusion_result">-</div>
              </div>
            </div>
          </div>

          <!-- Lidocaine Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Lidocaine</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="lido_conc" value="20" />
              </div>
              <div class="compact-input">
                <label>Bolus (mg/kg)</label>
                <input type="number" id="lido_bolus" value="1.0" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Infusion (mg/min)</label>
                <input type="number" id="lido_infusion" value="1" />
              </div>
            </div>
            <p class="info-text">Bolus: 1-1.5mg/kg | C.I.: 1-4 mg/min</p>
            <div class="result-box">
              <div class="result-item" id="lido_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="lido_bolus_result">-</div>
              </div>
              <div class="result-item" id="lido_infusion_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Inf (ml/hr)</div>
                <div class="result-value" id="lido_infusion_result">-</div>
              </div>
            </div>
          </div>

          <!-- Atropine Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Atropine</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="atropine_conc" value="0.5" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Bolus (mg)</label>
                <input type="number" id="atropine_bolus" value="0.5" step="0.1" />
              </div>
            </div>
            <p class="info-text">Bolus: 0.5mg q3-5min (max 3mg)</p>
            <div class="result-box">
              <div class="result-item" id="atropine_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="atropine_bolus_result">-</div>
              </div>
              <div class="result-item" id="atropine_max_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Max (ml)</div>
                <div class="result-value" id="atropine_max_result">-</div>
              </div>
            </div>
          </div>

          <!-- Amiodarone Card -->
          <div class="calculator-card">
            <div class="calculator-card-header">
              <div class="card-icon"><i class="fas fa-vial"></i></div>
              <h3>Amiodarone</h3>
            </div>
            <div class="calculator-card-body">
              <div class="compact-input">
                <label>Conc (mg/ml)</label>
                <input type="number" id="amio_conc" value="1.5" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Bolus (mg/kg)</label>
                <input type="number" id="amio_bolus" value="5" step="0.1" />
              </div>
              <div class="compact-input">
                <label>Inf (mcg/kg/min)</label>
                <input type="number" id="amio_infusion" value="5" step="0.01" />
              </div>
            </div>
            <p class="info-text">Bolus: 5mg/kg | Inf: 5-15mcg/kg/min</p>
            <div class="result-box">
              <div class="result-item" id="amio_bolus_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Bolus (ml)</div>
                <div class="result-value" id="amio_bolus_result">-</div>
              </div>
              <div class="result-item" id="amio_infusion_result_item">
                <div class="result-label"><i class="fas fa-tint"></i> Inf (ml/hr)</div>
                <div class="result-value" id="amio_infusion_result">-</div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      function calculateAll() {
        const weight = parseFloat(document.getElementById("weight").value);
        if (!weight || weight <= 0) {
          alert("Please enter a valid patient weight.");
          return;
        }

        const getValue = (id) => parseFloat(document.getElementById(id).value);

        // --- Calculations ---
        updateResult(
          "nep",
          (60 * weight * getValue("nep_dr")) / getValue("nep_conc")
        );
        updateResult(
          "epi",
          (60 * weight * getValue("epi_dr")) / getValue("epi_conc")
        );
        updateResult(
          "dopa",
          (60 * weight * getValue("dopa_dr")) / (getValue("dopa_conc") * 1000)
        );
        updateResult(
          "dobu",
          (60 * weight * getValue("dobu_dr")) / (getValue("dobu_conc") * 1000)
        );
        updateResult(
          "ntg",
          (60 * weight * getValue("ntg_dr")) / (getValue("ntg_conc") * 1000)
        );
        updateResult(
          "snp",
          (60 * weight * getValue("snp_dr")) / (getValue("snp_conc") * 1000)
        );
        updateResult(
          "vaso1",
          (60 * getValue("vaso_dr1")) / getValue("vaso_conc")
        );
        updateResult(
          "vaso2",
          (weight * getValue("vaso_dr2")) / getValue("vaso_conc")
        );
        updateResult("ppf1", (weight * 6) / getValue("ppf_conc"));
        updateResult("ppf2", (weight * 12) / getValue("ppf_conc"));
        updateResult("rftn1", (weight * 0.1 * 60) / getValue("rftn_conc"));
        updateResult("rftn2", (weight * 1 * 60) / getValue("rftn_conc"));
        updateResult("suftn1", (weight * 0.5) / getValue("suftn_conc"));
        updateResult("suftn2", (weight * 1.5) / getValue("suftn_conc"));
        updateResult("txa1", (weight * 10 * 3) / getValue("txa_conc"));
        updateResult("txa2", (weight * 1) / getValue("txa_conc"));
        updateResult(
          "ca_bolus",
          (getValue("ca_bolus") * 1000) / getValue("ca_conc")
        );
        updateResult(
          "ca_cont",
          (weight * getValue("ca_dr")) / getValue("ca_conc")
        );
        updateResult(
          "mg_bolus",
          (getValue("mg_bolus") * 1000) / getValue("mg_conc")
        );
        updateResult(
          "mg_infusion",
          (getValue("mg_infusion") * 1000) / getValue("mg_conc")
        );
        updateResult(
          "sbic",
          (weight * getValue("sbic_dr")) / getValue("sbic_conc")
        );
        updateResult(
          "phen_bolus",
          getValue("phen_bolus") / getValue("phen_conc")
        );
        updateResult(
          "phen_cont",
          (60 * weight * getValue("phen_dr")) / getValue("phen_conc")
        );
        updateResult("dant_bolus", (weight * 2.5) / getValue("dant_conc"));
        updateResult("dant_max", (weight * 10.0) / getValue("dant_conc"));
        updateResult(
          "dant_infusion",
          (weight * getValue("dant_infusion")) / getValue("dant_conc")
        );
        updateResult(
          "lido_bolus",
          (weight * getValue("lido_bolus")) / getValue("lido_conc")
        );
        updateResult(
          "lido_infusion",
          (getValue("lido_infusion") / getValue("lido_conc")) * 60
        );
        updateResult(
          "atropine_bolus",
          getValue("atropine_bolus") / getValue("atropine_conc")
        );
        updateResult("atropine_max", 3.0 / getValue("atropine_conc"));
        updateResult(
          "amio_bolus",
          (weight * getValue("amio_bolus")) / getValue("amio_conc")
        );
        updateResult(
          "amio_infusion",
          (60 * weight * getValue("amio_infusion")) /
            (getValue("amio_conc") * 1000)
        );
      }

      function updateResult(baseId, value) {
        const resultEl = document.getElementById(baseId + "_result");
        const itemEl = document.getElementById(baseId + "_result_item");

        if (resultEl && !isNaN(value) && value !== Infinity) {
          resultEl.textContent = value.toFixed(2);
          if (itemEl) {
            itemEl.classList.add("has-result");
          }
        } else if (resultEl) {
          resultEl.textContent = "-";
          if (itemEl) {
            itemEl.classList.remove("has-result");
          }
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        const inputs = document.querySelectorAll("input");
        let calculationTimeout;

        inputs.forEach((input) => {
          input.addEventListener("input", () => {
            clearTimeout(calculationTimeout);
            calculationTimeout = setTimeout(() => {
              if (document.getElementById("weight").value) {
                calculateAll();
              }
            }, 300);
          });
        });
      });
    </script>
  </body>
</html>
